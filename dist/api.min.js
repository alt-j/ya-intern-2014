var API=new function(){this.utils={},this.transports={};var a=this,b=function(b){var c,d;if(!b.transport)throw new Error("Card haven't type of transport");return c=b.transport,d=c.charAt(0).toUpperCase()+c.slice(1),delete b.transport,a.transports.hasOwnProperty(d)&&"function"==typeof a.transports[d]?new a.transports[d](b):(b.name=b.name||c,new a.transports.Transport(b))};this.getTripDescription=function(a){for(var c=[],d={from:[]},e={from:[],to:[]},f=a.length-1;f>=0;f--)a[f]=new b(a[f]),d.from[a[f].from]=a[f],-1===e.from.indexOf(a[f].from)&&e.from.push(a[f].from),-1===e.to.indexOf(a[f].to)&&e.to.push(a[f].to);if(e.to.length!==a.length||e.from.length!==a.length)throw new Error("Error: impossible to make a trip from this list");var g=e.from.filter(function(a){return e.to.indexOf(a)<0});if(g.length>1||0==g.length)throw new Error("Error: impossible to make a trip from this list");return g=g[0],function h(a){d.from[a]&&(c.push(c.length+". "+d.from[a].describe()),h(d.from[a].to))}(g),c.join("\n")}};API.utils.extend=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.parent=b.prototype},API.transports.Transport=function(a){var b=["from","to"],c=["notes","name"],d=0;for(this.required=this.required?b.concat(this.required):b,this.included=this.included?c.concat(this.included):c,d=this.required.length-1;d>=0;d--){if(!a[this.required[d]])throw new Error("Transport params isn't contain required paramter: "+this.required[d]);this[this.required[d]]=a[this.required[d]]}for(d=this.included.length-1;d>=0;d--)a[this.included[d]]&&(this[this.included[d]]=a[this.included[d]])},API.transports.Transport.prototype.describe=function(){return"From "+this.from+" to "+this.to+(this.name?" by "+this.name:"")+(this.notes?". "+this.notes:"")},API.transports.Bus=function(a){this.required=["seat"],this.included=[];try{API.transports.Bus.parent.constructor.call(this,a)}catch(b){throw new Error("Bus: "+b.message)}},API.utils.extend(API.transports.Bus,API.transports.Transport),API.transports.Bus.prototype.describe=function(){return"Take the bus"+(this.name?' "'+this.name+'"':"")+" from "+this.from+" to "+this.to+". "+("any"===this.seat?"No seat assignment":"Seat: "+this.seat)+(this.notes?". "+this.notes:"")},API.transports.Plane=function(a){this.required=["flight","gate","seat","baggage"],this.included=["company"];try{API.transports.Plane.parent.constructor.call(this,a)}catch(b){throw new Error("Plane: "+b.message)}},API.utils.extend(API.transports.Plane,API.transports.Transport),API.transports.Plane.prototype.describe=function(){return"From "+this.from+" take ï¬‚ight "+this.flight+(this.company?' by company "'+this.company+'"':"")+" to "+this.to+". Gate: "+this.gate+". "+("any"===this.seat?"No seat assignment":"Seat: "+this.seat)+". "+this.baggage+(this.notes?". "+this.notes:"")},API.transports.Train=function(a){this.required=["seat","number"],this.included=[];try{API.transports.Train.parent.constructor.call(this,a)}catch(b){throw new Error("Train: "+b.message)}},API.utils.extend(API.transports.Train,API.transports.Transport),API.transports.Train.prototype.describe=function(){return"Take train "+this.number+(this.name?" ("+this.name+")":"")+" from "+this.from+" to "+this.to+". "+("any"===this.seat?"No seat assignment":"Seat: "+this.seat)+(this.notes?". "+this.notes:"")};